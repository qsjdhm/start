<!DOCTYPE html><html lang="en" class="no-js"> <head>	<meta charset="utf-8" />	<title>起步 | 后台管理系统</title> 	<meta content="width=device-width, initial-scale=1.0" name="viewport" />	<meta content="" name="description" />	<meta content="" name="author" />	<!-- BEGIN GLOBAL MANDATORY STYLES -->	<link href="../media/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>	<link href="../media/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css"/>	<link href="../media/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>	<link href="../media/css/style-metro.css" rel="stylesheet" type="text/css"/>	<link href="../media/css/style.css" rel="stylesheet" type="text/css"/>	<link href="../media/css/style-responsive.css" rel="stylesheet" type="text/css"/>	<link href="../media/css/default.css" rel="stylesheet" type="text/css" id="style_color"/>	<link href="../media/css/uniform.default.css" rel="stylesheet" type="text/css"/>	<!-- END GLOBAL MANDATORY STYLES -->	<!-- BEGIN PAGE LEVEL STYLES --> 	<link href="../media/css/jquery.gritter.css" rel="stylesheet" type="text/css"/>	<link href="../media/css/daterangepicker.css" rel="stylesheet" type="text/css" />	<link href="../media/css/fullcalendar.css" rel="stylesheet" type="text/css"/>	<link href="../media/css/jqvmap.css" rel="stylesheet" type="text/css" media="screen"/>	<link href="../media/css/jquery.easy-pie-chart.css" rel="stylesheet" type="text/css" media="screen"/>	<link rel="stylesheet" type="text/css" href="../media/css/select2_metro.css" />	<link rel="stylesheet" type="text/css" href="../../plugjs/semantic-ui/packaged/css/semantic.css" />	<link href="../upload/css/uploadify.css" type="text/css" rel="stylesheet"/>	<!-- END PAGE LEVEL STYLES -->	<link rel="shortcut icon" href="../../image/foot.png" />		<style type="text/css" media="print, screen">  		 		#tagDiv{			-moz-border-bottom-colors: none;		    -moz-border-left-colors: none;		    -moz-border-right-colors: none;		    -moz-border-top-colors: none;		    background: none repeat scroll 0 0 #F6F6F6;		    border-color: #FFFFFF #DADADA #DADADA;		    border-image: none;		    border-right: 1px solid #DADADA;		    border-style: solid;		    border-width: 0 1px 1px;		    height: 50px;		    width: 820px;		}				.row-fluid .span6{			width:97.718%;		}				#myModal{    		margin-left:-146px!important;			width:640px!important;    	}	</style>   		<!-- END BODY --></head><!-- END HEAD --><!-- BEGIN BODY --><body class="page-header-fixed">	<div class="header navbar navbar-inverse">		<div class="navbar-inner">			<div class="container-fluid">				<a class="brand" href="index.html">					<img src="../media/image/logo.png" alt="logo"/>				</a>				<a href="javascript:;" class="btn-navbar collapsed" data-toggle="collapse" data-target=".nav-collapse">					<img src="../media/image/menu-toggler.png" alt="" />				</a>          				<ul class="nav pull-right">					<!-- BEGIN USER LOGIN DROPDOWN -->					<li class="dropdown user">						<a href="#" class="dropdown-toggle" data-toggle="dropdown">						<img alt="" src="../media/image/avatar1_small.jpg" />						<span class="username">文艺青年流川枫</span>						<i class="icon-angle-down"></i>						</a>						<ul class="dropdown-menu">							<li><a href="extra_lock.html"><i class="icon-lock"></i> 修改密码 </a></li>							<li><a href="login.html"><i class="icon-key"></i> 退出 </a></li>						</ul>					</li>				</ul>			</div>		</div>	</div>	<!-- END HEADER -->	<div class="page-container">		<div class="page-sidebar nav-collapse collapse">			<ul class="page-sidebar-menu">				<li>					<div class="sidebar-toggler hidden-phone"></div>				</li>				<li class="start">					<a href="../index.html">						<i class="icon-home"></i> 						<span class="title">欢迎回来</span>						<span class="selected"></span>					</a>				</li>				<li>					<a href="javascript:;">						<i class="icon-file-text"></i> 						<span class="title">文章管理</span>						<span class="arrow "></span>					</a>					<ul class="sub-menu">						<li>							<a href="../article/add_article.html">							添加文章</a>						</li>						<li>							<a href="../article/del_article.html">							删除文章</a>						</li>						<li>							<a href="../article/update_article.html">							修改文章</a>						</li>					</ul>				</li>				<li class="active">					<a href="javascript:;">						<i class="icon-bookmark-empty"></i> 						<span class="title">笔记管理</span>						<span class="arrow "></span>					</a>					<ul class="sub-menu">						<li class="active">							<a href="add_note.html">							添加笔记</a>						</li>						<li>							<a href="del_note.html">							删除笔记</a>						</li>						<li>							<a href="update_note.html">							修改笔记</a>						</li>					</ul>				</li>				<li class="">					<a href="javascript:;">						<i class="icon-sitemap"></i> 						<span class="title">笔记分类管理</span>						<span class="arrow "></span>					</a>					<ul class="sub-menu">						<li>							<a href="../note_classify/add_note_classify.html">							添加笔记分类</a>						</li>						<li>							<a href="../note_classify/del_note_classify.html">							删除笔记分类</a>						</li>						<li>							<a href="../note_classify/update_note_classify.html">							修改笔记分类</a>						</li>					</ul>				</li>				<li class="">					<a href="javascript:;">						<i class="icon-folder-open"></i> 						<span class="title">图书管理</span>						<span class="arrow "></span>					</a>					<ul class="sub-menu">						<li>							<a href="../book/add_book.html">							添加图书</a>						</li>						<li>							<a href="../book/del_book.html">							删除图书</a>						</li>						<li>							<a href="../book/update_book.html">							修改图书</a>						</li>					</ul>				</li>				<li class="">					<a href="javascript:;">						<i class="icon-th"></i> 						<span class="title">图书分类管理</span>						<span class="arrow "></span>					</a>					<ul class="sub-menu">						<li>							<a href="../book_classify/add_book_classify.html">							添加图书分类</a>						</li>						<li>							<a href="../book_classify/del_book_classify.html">							删除图书分类</a>						</li>						<li>							<a href="../book_classify/update_book_classify.html">							修改图书分类</a>						</li>					</ul>				</li>				<li class="last">					<a href="javascript:;">						<i class="icon-gift"></i> 						<span class="title">推荐管理</span>						<span class="arrow "></span>					</a>					<ul class="sub-menu">						<li>							<a href="../recommend/recom_article.html">							推荐文章</a>						</li>						<li>							<a href="../recommend/recom_note.html">							推荐笔记</a>						</li>					</ul>				</li>			</ul>			<!-- END SIDEBAR MENU -->		</div>		<!-- END SIDEBAR -->		<!-- BEGIN PAGE -->		<div class="page-content">			<div class="container-fluid">				<!-- BEGIN PAGE HEADER-->				<div class="row-fluid">					<div class="span12">						<!-- BEGIN PAGE TITLE & BREADCRUMB-->						<h3 class="page-title">							添加您想发表的笔记 <small></small>						</h3>						<ul class="breadcrumb">							<li>								<i class="icon-home"></i>								<a href="../index.html">起步</a> 								<i class="icon-angle-right"></i>							</li>							<li><a href="add_note.html">添加笔记 </a></li>							<li class="pull-right no-text-shadow">								<div id="dashboard-report-range" class="dashboard-date-range tooltips no-tooltip-on-touch-device responsive" data-tablet="" data-desktop="tooltips" data-placement="top" data-original-title="Change dashboard date range">									<i class="icon-calendar"></i>									<span></span>									<i class="icon-angle-down"></i>								</div>							</li>						</ul>						<!-- END PAGE TITLE & BREADCRUMB-->					</div>				</div>				<!-- END PAGE HEADER-->				<div id="dashboard">					<!-- BEGIN DASHBOARD STATS -->					<div class="row-fluid">						<!-- 富文本编辑区域开始 -->							<select id="noteClassify" style="height:39px!important;line-height:39px!important; " class="small m-wrap" tabindex="1">															</select>							<input value="" style="margin-left:10px;padding:2px 6px;height:33px;line-height:33px;width:400px;" type="text" id="myTitle" name="myTitle" />							<button style="position: relative;top:-10px;height: 48px;line-height: 42px;" id="openImgUpdate" class="btn blue btn-primary" type="button">添加封面</button>														<textarea rows="" cols="" name="content" id="myEditor"></textarea>														<div id="tagDiv" class="control-group">								<div class="controls" style="margin-left: 10px;padding-top: 8px;">									<input type="hidden" id="select2_sample5" class="span6 select2" value="">								</div>							</div>					        <div id="submit" style="margin-bottom:20px;height:40px;background-position:0 center;" class="ui button blue submit labeled icon">					          <i class="icon edit"></i> 提交笔记					        </div>					        						<!-- 富文本编辑区域结束 -->					</div>					<!-- END DASHBOARD STATS -->					<div class="clearfix"></div>				</div>			</div>			<!-- END PAGE CONTAINER-->    		</div>	<!-- Modal -->			<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">			  <div class="modal-dialog">			    <div class="modal-content">			      <div class="modal-header">			        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>			        <h4 class="modal-title" id="myModalLabel">新增笔记封面</h4>			      </div>			      <div class="modal-body">			        <!-- BEGIN DASHBOARD STATS -->					<div class="row-fluid">						<form action="#" class="form-horizontal">							<div class="control-group">								<label class="control-label">笔记封面</label>								<div class="controls">									<div id="uploader">										<p><input type="file" name="file_upload" id="file_upload" /></p>										<a href="javascript:up()">上传</a>&nbsp;								        <a href="javascript:stop()">取消上传</a>								        <div id="uploader_queue"></div>								        <div id="uploader_msg"></div>										<div id="uploader_view"></div>									 </div>								</div>							</div>						</form>					</div>			      </div>			      <div class="modal-footer">			        <button id="saveCover" type="button" data-dismiss="modal" class="blue btn btn-primary">确定</button>			        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>			      </div>			    </div><!-- /.modal-content -->			  </div><!-- /.modal-dialog -->			</div><!-- /.modal -->		<!-- END PAGE -->	</div>	<!-- END CONTAINER -->	<!-- BEGIN FOOTER -->	<div class="footer">		<div class="footer-inner">			2013 &copy; Metronic by keenthemes.		</div>		<div class="footer-tools">			<span class="go-top">			<i class="icon-angle-up"></i>			</span>		</div>	</div>	<!-- END FOOTER -->	<script src="../media/js/jquery-1.10.1.min.js" type="text/javascript"></script>	<script src="../media/js/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>	<script src="../media/js/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>      	<script src="../media/js/bootstrap.min.js" type="text/javascript"></script>	<script src="../media/js/jquery.slimscroll.min.js" type="text/javascript"></script>	<script src="../media/js/jquery.blockui.min.js" type="text/javascript"></script>  	<script src="../media/js/jquery.cookie.min.js" type="text/javascript"></script>	<script src="../media/js/jquery.uniform.min.js" type="text/javascript" ></script>	<script src="../media/js/jquery.flot.js" type="text/javascript"></script>	<script src="../media/js/jquery.flot.resize.js" type="text/javascript"></script>	<script src="../media/js/jquery.inputmask.bundle.min.js" type="text/javascript"></script>   		<script src="../media/js/app.js" type="text/javascript"></script>	<script src="../media/js/form-components.js"></script>    	<script src="../media/js/select2.min.js" type="text/javascript"></script>	<script src="../media/js/index.js" type="text/javascript"></script>      	   	<script type="text/javascript" src="../upload/scripts/swfobject.js"></script>	<script type="text/javascript" src="../upload/scripts/jquery.uploadify.min.js"></script>		<script src="../../plugjs/ueditor1.6.1/ueditor.all.js" type="text/javascript"></script>	<script src="../../plugjs/ueditor1.6.1/ueditor.config.js" type="text/javascript"></script> 	<script>		var noteCover = "";  // 笔记封面		jQuery(document).ready(function() {    		   App.init(); // initlayout and core plugins		   		   Index.init();		   		   queryNoteClassify();  // 请求笔记分类信息					   addOpenUpdateEvent();  // 监听打开封面文本框					   createUpload();  // 创建上传组件		   		   createUeditor();  // 创建富文本		});						// 首先查询笔记的分类		function queryNoteClassify(){			$.ajax({				type : "post",				url: "../../ClassifyAction?opeType=queryPage&pageId=1&pageCount=1000&fCode=2",				dataType:"json",			    success: function(data) {			    	$.each(data.classifyData,function(k,v){			    		$("#noteClassify").append('<option style="height:30px!important;line-height:30px!important; "  value="'+v.Sort_ID+'"> '+v.Sort_Name+' </option>');			    	});			    	FormComponents.init();  // 标签组件			    }			});		}						// 绑定打开图片上传弹出窗		function addOpenUpdateEvent(){			$("#openImgUpdate").bind("click",function(){				$('#myModal').modal();			});		}				// 创建富文本		function createUeditor(){			var editor = new UE.ui.Editor({			    //这里可以选择自己需要的工具按钮名称,此处仅选择如下五个				//toolbars:[['FullScreen', 'Source', 'Undo', 'Redo','Bold']],			    initialContent: '',  // 初始化时显示的内容			    focus: true,  // 是否聚焦			    initialFrameWidth: 820,  // 设置宽度			    initialFrameHeight: 400,  // 设置宽度			    //focus时自动清空初始化时的内容			    autoClearinitialContent:true,			    autoHeightEnabled:false			    //更多其他参数，请参考editor_config.js中的配置项			});			editor.render("myEditor");						$("#submit").click(function(){				var loader = '';				loader += '<div id="loading" class="ui active dimmer">';				loader += '    <div class="ui text loader">Loading</div>';				loader += '</div>';				$("body").append(loader);								// 获取标签				var str = "";				$.each($(".select2-search-choice"),function(k,v){					if(k==0){						str += $(v).find("div").html();					}else{						str += ","+$(v).find("div").html();					}				});								UE.ajax.request('../../NoteAction',{					// 可省略，默认POST					method:'POST',					//可以自定义参数					content:editor.getContent(),					// 也可以直接传json，但是只能命名为data，否则当做一般字符串处理					data:{						opeType:"add",						noteTitle:$("#myTitle").val(),						contentText:editor.getContentTxt(),						fCode:"2",						typeId:$("#noteClassify").val(),						typeName:$.trim($("#noteClassify  option:selected").text()),						coverImg:noteCover,						label:str					},					onsuccess:function(xhr){						$("#loading").remove();						alert("添加成功");						console.info(xhr);					},					onerror:function(xhr){						alert("添加错误");						console.info(xhr.responseText);					}				});			});		}				// 创建上传组件		function createUpload(){			 $("#file_upload").uploadify({			    	//按钮内容			    	'buttonText' : '添加封面',			        //开启调试			        'debug' : false,			        //是否自动上传			        'auto':false,			        //上传方式 必须是get，要不然后台接收不到formData的数据			        'method' : 'get',			        //超时时间			        'successTimeout':99999,			        //附带值			        'formData' : {'type':'add','myTitle':'111','types':'3','content':'content','ncontent':'ncontent'},			        //flash			        'swf' : '../upload/scripts/uploadify.swf', // flash			        //不执行默认的onSelect事件			        'overrideEvents' : ['onDialogClose'],			        //文件选择后的容器ID			        'queueID':'uploader_queue',			        //服务器端脚本使用的文件对象的名称 $_FILES个['upload']			        'fileObjName':'upload',			        //上传处理程序			        'uploader' : '../../UploadAction', // 数据处理url			        //浏览按钮的背景图片路径			        //浏览按钮的宽度			        'width':'100',			        //浏览按钮的高度			        'height':'32',			        //expressInstall.swf文件的路径。			        'expressInstall':'../upload/scripts/expressInstall.swf',			        //在浏览窗口底部的文件类型下拉菜单中显示的文本			        'fileTypeDesc':'支持的格式：',			        //允许上传的文件后缀			        'fileTypeExts':'*.jpg;*.jpge;*.gif;*.png',			        //上传文件的大小限制			        'fileSizeLimit':'3MB',			        //上传之后不自动消失			        'removeCompleted' : false,			        //上传数量			        'queueSizeLimit' : 25,			        //每次更新上载的文件的进展			        'onUploadProgress' : function(file, bytesUploaded, bytesTotal, totalBytesUploaded, totalBytesTotal) {			             //有时候上传进度什么想自己个性化控制，可以利用这个方法			             //使用方法见官方说明			        	console.info(file);			        },			        //选择上传文件后调用			        'onSelect' : function(file) {			            console.info(file);			        },			        //返回一个错误，选择文件的时候触发			        'onSelectError':function(file, errorCode, errorMsg){			        	console.info(errorMsg);			            switch(errorCode) {			                case -100:			                    alert("上传的文件数量已经超出系统限制的"+$('#file_upload').uploadify('settings','queueSizeLimit')+"个文件！");			                    break;			                case -110:			                    alert("文件 ["+file.name+"] 大小超出系统限制的"+$('#file_upload').uploadify('settings','fileSizeLimit')+"大小！");			                    break;			                case -120:			                    alert("文件 ["+file.name+"] 大小异常！");			                    break;			                case -130:			                    alert("文件 ["+file.name+"] 类型不正确！");			                    break;			            }			        },			        //检测FLASH失败调用			        'onFallback':function(){			            alert("您未安装FLASH控件，无法上传图片！请安装FLASH控件后再试。");			        },			        //上传到服务器，服务器返回相应信息到data里			        'onUploadSuccess':function(file, data, response){			        	noteCover = data;  // 保存上传的封面图片			        	console.info(file);			        	//queryTotal();			        },			        'onAllComplete':function(){			        	console.info("111");			        }			    });		}				function up(){			// 获取标题			var title = 111;			// 获取内容			var content = "asda";			var ncontent = "asda";			$('#file_upload').uploadify('settings','formData',{'type':'add','myTitle':title,'types':'3','content':content,'ncontent':ncontent});			$('#file_upload').uploadify('upload','*');		}		function stop(){			console.info("stop");			$('#file_upload').uploadify('stop');		}	</script>	<!-- END JAVASCRIPTS -->	<script type="text/javascript">  var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-37564768-1']);  _gaq.push(['_setDomainName', 'keenthemes.com']);  _gaq.push(['_setAllowLinker', true]);  _gaq.push(['_trackPageview']);  (function() {    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);  })();</script></body>	</html>